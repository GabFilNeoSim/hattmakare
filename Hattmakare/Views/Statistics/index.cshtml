@using System.Text.Json;
@using Hattmakare.Models.Statistics

@model StatisticsViewModel

@{
    ViewBag.Title = "Försäljningsstatistik";
}

<h2>Försäljningsstatistik</h2>

<form method="get" class="mb-3">
    <label for="CustomerId">Välj kund:</label>
    <select asp-for="CustomerId" asp-items="Model.Customers" class="form-control" id="customerSelect" @* onchange="document.getElementById('filterForm').submit();" *@>
        <option value="">Alla kunder</option>
    </select>

    <label for="HatId" class="mt-2">Välj hatt:</label>
    <select asp-for="HatId" asp-items="Model.Hats" class="form-control" id="hatSelect" @* onchange="document.getElementById('filterForm').submit();" *@>
        <option value="">Alla hattar</option>
    </select>
</form>

<div class="btn-group mb-3" role="group">
    <button type="button" class="btn btn-outline-primary range-btn active" data-range="month">Månad</button>
    <button type="button" class="btn btn-outline-primary range-btn" data-range="quarter">Kvartal</button>
    <button type="button" class="btn btn-outline-primary range-btn" data-range="year">År</button>
</div>

<div class="chart-container" style="height:400px;">
    <canvas id="hatChart"
            data-dailylabels='@Html.Raw(JsonSerializer.Serialize(Model.DailyLabels))'
            data-dailysales='@Html.Raw(JsonSerializer.Serialize(Model.DailySales))'
            data-quarterlysales='@Html.Raw(JsonSerializer.Serialize(Model.QuarterlySales))'
            data-monthlysales='@Html.Raw(JsonSerializer.Serialize(Model.MonthlySales))'>
    </canvas>
</div>
